function [Y,Xf,Af] = ANN_horz_60_200n1_normal(X,~,~)
%ANN_HORZ_60_200N1_NORMAL neural network simulation function.
%
% Auto-generated by MATLAB, 27-May-2020 18:56:51.
% 
% [Y] = ANN_horz_60_200n1_normal(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 1xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = -166881;
x1_step1.gain = 6.4553820133691e-06;
x1_step1.ymin = -1;

% Layer 1
b1 = [-279.69100826401739823;277.19151301933482046;274.37161173184978225;-271.56516447968681405;268.73540292880534253;-265.92268719267485722;263.19969642160066314;-260.36489262020131719;257.35882695731612557;254.74031650397799353;-251.86231304905064121;249.02035576052131205;246.20487455761630713;243.44168846951907881;240.97875018146467596;-237.76009281380746074;-234.935705405849518;232.59210119223214974;229.82928752526092353;-226.38839783495183156;-223.73281075134926255;220.72904831362274081;-218.12062850236102918;-215.31072820473482921;-212.6288888760369673;209.83115309530379022;-206.59748575648757196;-203.96879805745192016;201.04296153844498463;-198.23912228289623272;-195.6994350492678052;-192.66667802451127045;-190.05839988890522818;-187.14996229743570666;-184.16278866573557593;181.54360351668532303;178.70264243423869743;175.91278548016887839;173.05892508726003598;170.03609899169370578;167.34074034336524051;-164.76877589068044472;161.7717031202345197;158.87011794861848557;156.19748228945499591;-153.38290971739471047;150.58669323738268986;147.74323506073017143;-144.82310351726019348;-142.2476890069640092;-139.20387779445240994;136.39563592782400292;133.81413984077275359;130.81845245800766975;127.94043525562665309;-125.16138066772083448;122.54656318148835226;119.49951050327457835;-116.87238909513905583;113.7309046328873734;-111.31346631656202817;-108.23698072212802401;-105.51958785383308737;102.62250289907433398;-99.857271223546362648;-97.062212509886208522;-94.251818094470280585;91.615076888068315952;-88.436802549282163;-85.768666886366332847;-83.079462680990644685;-80.321698077096598922;77.288434289470671956;74.655488902545741325;-71.643498390449749991;69.03868959702468544;-66.142421866568554378;63.163700049902324452;-60.708467911275079132;-57.655984566274710801;-54.850264304552489136;-51.90514351625464684;-49.269822531358471451;-46.376295194685589252;-43.572331971142766349;40.734903334567853506;-38.108862942176862987;35.311716237455861744;32.352257826102260196;-29.563168828443803449;26.805936464024682664;-24.031237053165714457;-21.097984822479030953;-18.318564688897669868;15.425979617243459785;-12.65443653320064854;-9.9194802203071006375;7.0423646299790867431;-4.1534314216493237737;-1.466559318334722084;1.5534606024316606199;4.1555614342355777779;7.0418420948219484501;-9.9202517367644151847;-12.696391021962771362;-15.400798678771458583;-18.378120043776050352;21.129483263278444838;23.919949798923440198;26.752567711698414854;29.54096892249308226;-32.355227713717312099;35.18057902964076078;-37.995941547984358522;-40.785487107694152087;-43.615213142735207441;46.480863901272286398;-49.220900611975451966;52.047624216854117662;-54.861083596910965809;-57.694116396603234875;60.500597145455088821;-63.304998135772947876;66.14235701977857218;-68.892922514701680825;-71.831174414989561683;74.79497355713009199;-77.096148356167560678;80.290943061861554497;82.971387120163200279;-85.858835921279052172;88.629496035849612667;91.437367246607720972;94.355046687579104514;97.055826636337201307;99.875422774086047184;-103.20251380602850588;105.52169857533951358;-108.15022892103294794;-111.17031483286666571;114.16828364810484686;116.76623440969926548;119.59817468104616012;122.39684705551998434;-125.26488855992721483;128.20703523350215391;130.6795273928024983;133.6909399505543945;-136.48289234654151869;-139.21311342889626417;141.86065353780293208;-145.03924946928518125;-147.31241232014082243;150.54740476202894683;-153.32731785021962878;156.24060051807117588;-158.6409554480524946;161.85603026319026299;-164.52349529498752645;-167.45387996429627719;170.31390597649951246;-173.0020935123212098;-176.02734171620357984;-178.95692990690258739;181.67414302176143792;184.22407245700694034;187.31022067768520856;-189.9348362761900546;-192.65240245935046914;-195.49626352758565417;198.4564351360955925;-201.16779718800958676;203.94884877994991257;206.83500216108694758;-209.71524554954089581;-212.4460807674984153;215.23259039959469874;-218.03347380008020195;-221.00193556742055989;223.62040991335888407;-226.55617292498126858;229.68240839850236057;232.27233589745813447;234.83425984740830472;237.8255959725612172;240.61624450594371183;243.37838742984317264;-246.36427171427456528;-249.00492700748120001;-251.82752341509393545;254.70375888092354444;257.39768545141873801;-260.17066708893224813;263.67610889156031817;265.92021494313132735;-268.72558836635090529;271.114040912819803;274.85998272210002824;277.17801490722553126;-279.89889435263631867];
IW1_1 = [280.30899173534038482;-279.99441667116008148;-280.00023973345173545;279.99281181250216832;-280.00776643530463161;280.00658070311118308;-279.92006541016786514;279.9409502976104136;-280.11802562827085694;-279.938940482077669;279.99719532858563298;-280.02212594940056078;-280.02240404615804437;-279.97828971936633025;-279.67686265109341548;280.02479810226111567;280.03256498650461026;-279.64254710465576181;-279.60249175201954586;280.11660727156407802;279.98853177044441054;-280.13841953173437105;279.97549990686627552;279.97214971664794803;279.87114721382147309;-279.86172062074342648;280.17445957129001499;280.0370420287144384;-280.11667417634822641;280.10735506502669523;279.91452745645176492;280.06688275726281745;279.92639452112098297;279.99037263644794393;280.10322518637605071;-279.97487178017786391;-279.99427401016220074;-279.97906131190643464;-280.0033597043102418;-280.1301543576338986;-280.05679971694149799;279.91440533354875697;-280.02162438121348487;-280.07071299003547438;-279.99066943643833838;279.99116920725128921;-279.98125153817102273;-279.99762332343146909;280.0512939493607405;279.92942972215229247;280.04597998024360095;-280.04103750818660501;-279.92987652466024429;-280.01664406894701642;-280.04525605560257873;280.02828303006765509;-279.94026305685093803;-280.04192161461429578;279.96277712186861208;-280.09620965152208782;279.93629284684794811;280.04035488541666155;280.00286861911001779;-280.03271180200391655;280.0137526424597354;280.00651744000754206;280.00521809947144902;-279.94728365195453534;280.06508411798245106;280.01717537674932146;279.9797457926287052;279.96482746880815284;-280.02694411200468494;-279.97780770707441889;280.02935217782601285;-279.97644740866809343;279.99719282837367018;-280.03407504023948604;279.95485306102733603;280.00670088733852481;280.00470544891095415;280.02839630584611541;279.99568504496994592;280.00936761547859533;280.00691005429791858;-280.00972594294296414;279.98293202179377204;-279.98219295628496184;-280.00002066702171533;279.9968997566923008;-279.99153210789700097;279.98973932441384704;280.00062236507460511;279.99816017105547417;-280.00271267681006293;279.99996060833336742;279.99742012669645419;-279.99969045084213803;280.00088241636052544;279.9996668548959633;279.99859215498918275;280.00030112864050125;279.99973861085089766;-279.99719366844465185;-279.99796509888903984;-280.00373112230295192;-279.99421269839621118;279.99785834869197743;279.99997466468960283;279.99811157771364378;280.00062219807801966;-280.00071408490225622;279.99939439479044268;-279.99917249885481851;-280.00256772129051797;-280.00043424562642258;279.991812535341694;-280.00367716954445996;280.0023238308820055;-280.00259948537376431;-279.99883860964712312;280.00042227218466451;-280.00257435241542225;279.9971608813332864;-280.01234331691586021;-279.98138773803083268;279.94079084305400329;-280.07980136439778107;279.97400358953495925;280.01280149078746717;-279.99074837056434717;280.00401654770223558;280.00651825700816744;279.97189596404206213;280.01012924992517128;280.00867954141187965;-279.81916576211136771;280.00101932585340592;-280.07306603035539183;-279.99420739894242161;279.91791103488350245;280.00688627217459725;279.99865306423282618;280.00612946504594447;-279.98187823540689578;279.92267566059774708;280.08098613080107953;279.98919198837234035;-279.99969241944756959;-280.04143164060633353;280.12704846412157167;-279.93898198621735673;-280.22461077698540066;280.00269870557667673;-280.02092130745421628;279.96632392237967224;-280.20092831903906472;279.97284685999289877;-280.05867633493215862;-279.989564220935506;279.96219857281329269;-280.03893546930993352;-279.90655814383899269;-279.83139754259195797;279.89066672221429144;280.06366042152268392;279.88220736501301644;-280.00885184689110474;-280.07613914616280226;-280.05657388397099794;279.95355813153264535;-280.02647564125356894;280.05175199748197201;279.99937770801062698;-279.94966577343018344;-280.01067751963796582;280.03242278552141897;-280.04418150023587941;-279.92188663479112165;280.07778439100246715;-279.98097524475303999;279.72579938447529457;279.90699290617880024;280.11778123086571668;279.96879564222319914;279.98863080195286557;280.03355771154866716;-279.88222809949934344;-280.0351910193327285;-280.02797202382447495;279.97125407252337936;280.08082201869837036;-280.12112225146410083;279.47299657075478763;280.00888723774590972;-280.017198189883743;280.42964997858837251;279.52185093945377048;280.00778857713453363;-280.10110541370011106];

% Layer 2
b2 = -0.14759102268334647889;
LW2_1 = [-0.53140363310276472752 -0.62026546725905251645 0.25513496505652039081 0.053496382886993140704 0.0068489379347406870169 0.0011310574659873645631 -0.0010755674761727118671 0.001211948004420976624 0.0041336452073291469339 -0.019296708787546204555 0.0033985579233742442204 0.0034470501388221977748 0.0065751936803150456273 -0.0069867962374515809459 -0.014151827325112737582 0.011698124961136108918 0.01709885091053083353 0.015006266825160447659 -0.017805743564087615771 0.014986969850414219238 0.0007121227077282702312 -0.0043216779851736417811 0.011572803290369816295 -0.001566093425332721039 0.015414642097679757612 0.0030294034254137324098 0.016259675544306517736 -0.00025879258403285472327 -0.0067517113364146839546 0.010218268657573274447 0.0032244574116516875814 0.0053288994967745023992 0.0056481620358689588191 0.00022772193737138066768 0.010600919749217382893 0.0020809047774229946434 -0.0094994002073126374008 -0.003368440399785092073 -0.0018125934656533153159 -0.0091711682142964021797 0.010144889584950722225 0.011038037450121520461 -0.005640710339059918331 -0.018257157813276466557 -0.0020440234063887089896 0.005326190150226818576 -0.0038478794899889702009 -0.0036899848093828770124 0.00037189142049745668641 0.00068245317719077189505 0.0005531765191299779956 -0.002067034331927944911 -0.0029901855159657000915 -0.0055051179826424425853 -0.0039829092818476378654 0.0036628372063969671761 -0.0055887633698463619336 -0.012273557278575188134 -0.00078716670956995124942 0.0021531539727304492386 0.0076298926159803518929 0.0053293274876254478553 -0.00019684054344589537334 -0.0092785938411217155908 0.0036755390699203193371 0.0027618049134323831989 0.0026270406784469064847 -0.0090495027501310883883 0.0092094540793658790506 0.0063315215599298929269 0.00087125196758180750625 0.0036358833843406893928 -0.0017145656261125538731 -0.0010419967563675880309 0.0026820878173815761517 -0.0023204700389118696445 0.0027143688096505189274 0.0029740613550663782746 0.0045063664528943708082 0.0011015378454244223981 -0.0029810452295911029491 0.0034112879390441387152 -0.0026699342661949758936 0.02054375625968889868 0.014065612479874908813 -0.065908330134354958796 -0.022190297399711466503 -0.016878115699680871359 0.0025831839706428995698 0.000925992094352167186 -0.00056671520933509675344 -0.0008986868573412751162 0.00011965472289303739873 -0.00042366795622727837023 -0.00050739759350033192264 0.00031369349110972106652 -0.00046931746901020043395 -0.0013867543963328324633 -0.00037443283654198375107 0.0013687676335805555421 -2.2895336322012628657e-05 -0.00097017731960642001558 0.0036355357929313937906 0.0018655004115625930042 -0.0005352100503227242255 0.001488624971807569336 -0.0055706769371707647032 -0.03560334404334804248 0.22564851673919367192 -0.10324611569896563479 -0.05195401074291486343 -0.047213259641072549688 0.0012842035481133353553 0.0054887395427137561713 0.0023466302979403947347 -0.0056171181411100177053 -0.0041107952269169032236 -0.0012715772117498653354 -0.00022278448125904714021 -0.0021685871185517634901 -0.0039040658757157286306 -0.00073789148966819863469 -0.0045295449872621729864 -0.0080410710865716598927 -0.0087020320032441065422 0.0016786754146966983373 0.0076049189962580192315 -0.0060472476016734475618 -0.0015143524775775121013 0.004489376208750593851 -0.0024682269631285326701 0.007632377095456543796 0.0042111287226113845381 0.0060945733288054731308 -0.00076371517038496068621 0.0073038536808044561208 -0.012424923942894903692 -0.0011727060307380892962 -0.0087958741498969580941 -0.017710856138261149573 0.0072542270409145671178 -0.00052252060776903958179 -0.002919413429994985841 0.0048850900778841443647 0.0018208108900534649213 0.0072013308767590843151 0.0068091875770242473592 -0.0018367914078881643781 -0.0068887898999587379376 -0.00071346676059128532298 0.012182661971705255333 0.0077081586692122078946 -0.017598680147925590406 -0.0011502677017817329423 -0.015341728367838336836 -0.0014940629057478007572 -0.011909196151042340459 0.0065914410663425685583 -0.0048306167384249906749 -0.00097303052530186835527 0.0081369842968803743344 -0.0063683806135280468172 -0.016229986132086499789 0.0032061776843996013867 0.017715792613371618425 0.0097325878159764886433 -0.00083105322219340571014 -0.0056056238159148639999 0.0014586389884177208831 -0.0032325232014142378859 0.0049045848026043918286 0.0010356230719791123963 0.0073382694611779488228 -0.00052113775176182994611 -0.001940822837416905167 -0.0080466706013263573222 0.0079706624366408553028 -0.0057145998633070108422 -0.013085094172615024943 -0.00036117064169746259522 -0.00039216095640734775427 0.030729188065150476322 -0.0094674941448438243441 0.014567819026164321658 0.0022330643995418465383 -0.0010331474391222709823 0.0041487839385334077461 -0.0030955785959835566482 0.0048971922749069286829 -0.0044515970091290341798 -0.0023439702174620439395 0.001269692004089450349 -0.0027246702026162200258 -0.19474990670831507367 0.17386229280581794177 -0.062265032541256315479 -0.037087552380364041671 -0.23045238971641932024 0.24061072236983660488 0.029433724121466019186];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0149076572882655;
y1_step1.xoffset = -64.3649297385139;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
