function [Y,Xf,Af] = ANN_60_75n(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 02-May-2020 00:51:45.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx4 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx3 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-166881;627;-105928;629];
x1_step1.gain = [6.4553820133691e-06;0.000655522779416585;8.43401437999452e-06;0.000655737704918033];
x1_step1.ymin = -1;

% Layer 1
b1 = [-17.821900923480317402;13.569599916548323648;-14.314041133386169236;4.533595285506545558;-5.0208730987377085953;4.8050612240743326709;-7.1100190979677071468;-4.0277824262506705111;3.6560702712152708393;-6.0042047592309080173;-7.9988326165122733968;-0.60745949257735132321;3.7353880582761327389;20.222430211336224204;-3.7983876269517575786;4.0858344356526838936;-3.2129311779679348149;11.509385527264011984;-1.6601008725153514334;2.8019731122553817038;-2.224554401115522051;-11.236057858282533672;7.8590989433785898299;-3.2878841254557977791;-1.8954297439083538368;0.20958830062681402251;7.1389110887630016222;3.6513788753556091216;-0.70299756920297062912;0.26382057062438302175;-0.87919830645997465446;0.22658657008809485189;0.96011772719736643289;-0.74367281732342382927;0.47762122188752387242;0.27205257957946732406;-0.24972566776869212224;6.9550774394387469002;-3.5776881792988484143;1.1542717822336177047;0.55589020592896321027;3.4469693565963321902;0.66318942799573754598;0.26139116116591359917;1.0602757167530183491;3.4117426655316491768;8.9598159669591055376;20.875660939770686042;0.96864546540295937138;2.4456477006045576061;6.1451727736195564944;-15.057771528122998461;5.8950962553944856737;-6.6112363597863996745;-10.543556491488502047;7.2727641321322433754;9.3023754012061097285;12.359879600747994743;-7.9529176564747139366;-1.1031974241808382153;-10.08425261358507008;14.702971276706859882;3.6611465951458530554;-14.591323922164848526;-3.0417322502268149265;6.5330608311203803851;7.8527288340960623714;-9.4828592233916477738;-1.9623610600486314226;2.2858285082073082073;-9.3684987504797376801;17.766087220144360259;11.582171971531268539;-5.2660901105107971176;3.5195877186656949753];
IW1_1 = [21.416522331224335574 -3.5420024760394288599 2.8580335071683897752 12.801537788382393757;-16.852500932847618742 -0.26922553504491547605 5.4095020906594388777 -5.7533606023004528751;18.9592232397004814 -3.3941682573520166599 1.264168363979123022 9.4505924432655703527;-1.4081612733073471944 -4.025608505616993682 0.13814818515123269971 -2.6647203298037536179;0.2558030253999677428 -1.769167052350494318 -7.7039897660914737898 4.1371603746447762617;-9.3985025674250994854 -1.600557860502821006 -0.45244441668111184951 -1.3148106019504401942;5.8138412967528143582 2.6656888699542573562 10.098299306406811837 1.3961027185293939379;-0.47596659391209344969 3.6705896455894304609 7.4660276209983624796 0.2585143571315512423;0.28239343210063139189 2.8040366363563835606 -4.1071121659657592318 1.5162020122508370612;6.1858709388119184069 -5.5500157810355661425 -1.9131527639782131001 -2.5698331868000976463;9.2479454847053368383 -1.5077205686961716591 -0.089947677832660943853 0.50945016613094429303;-0.7129984949729827326 -0.98951987581987332909 0.053523732074428162497 -0.85558530108517094614;-0.56771033380256596956 1.5944479168756975351 4.5537526758159625473 -2.560073528677971666;-27.675247692941969291 19.338310667469173154 3.3707182246302216377 5.6455668959485025837;4.8995568188546494426 3.0569987451791504895 -0.95768615819613911455 5.0518178714966097687;-5.2716985632636541581 -3.1978853803204847495 0.99987136880764493352 -5.3887114055698601689;1.203845863731917154 2.4325326646318119472 -0.15006011372753930155 1.9164329270769069336;-15.180718253875079782 1.9858063992075782878 -2.9733055499727352178 -9.5050648016001257901;1.8459731729248309851 -1.6536429673262624807 -0.89443270213948766756 -0.95424460527558696565;0.31809783894262472215 2.8602936682298802928 -3.0111945849175412171 2.5874585211776017779;2.1685472461971735392 -2.1464433013028263453 -0.9580781679673691098 -1.3378706306409433591;14.685620169153793313 -1.9093348501379179272 2.9499775060764426016 9.337628909505239605;-9.4083877712040564489 6.4993341736952912058 3.5107603984322404145 3.1081629372100527675;16.792236832666933566 -3.0300733350420072654 0.92745975950494019546 2.3880647402647317001;2.7401214549553238875 -0.69627150751015409735 -2.5652309641061394885 1.0189994128408546015;-13.002573456455486678 -6.3774356952671169552 1.5281989122194326036 -14.391202509077952953;-42.243259622595765279 0.95592356517761689627 -2.2284299294538367775 -2.8344991834848194401;-7.0088930447095858511 -0.12035584067917505513 6.2509649421201833874 -3.171521397770609596;4.0888506447392654053 0.72084084843625118033 1.6851412500529472371 -0.37931519578555922267;-3.0327244605966279245 2.8262197854549553355 1.61257536160803161 1.602498508377694586;3.6165101515603743643 0.90997835615812161514 2.0790082095064046364 -1.0760199118033166865;-0.62270234179525363327 -0.8998807350549327122 -3.1089186911397965751 -4.5062695898324509614;0.91615597218564637227 0.64872827271763822132 4.7342148425732819561 -0.4266106019813940553;3.4651221957847528898 0.84707319679856118988 1.8786461987548741526 -0.77637464257110344601;2.9572682783256394323 3.4046266990707048095 -1.1888082280515375189 6.5389892533081415138;-2.7798601393380533153 2.6267684402514852593 1.4068646112750444743 1.5923058215243457436;-6.0546830152204957898 1.8729850006809960483 -0.090046438448916923947 2.3593898887239763695;12.631003685669963232 -11.397048825615307521 -1.7846672646511319016 -9.2015953687996265842;-8.9484245155524835269 4.8045825496185177172 1.2230974230741551434 3.2592257289202746229;1.1216893190959107418 -2.2754078097834216088 -0.029917070512732978071 -1.8270547832534809185;3.2047438584047878152 3.5601832637894590405 -1.3189301702743381206 7.4971387680291208255;30.259017578821904237 -1.32074726688026578 -2.7335124693543062513 -1.2075801562924903809;3.1586735517895729863 -1.1429753884074373982 -0.39951223833641447136 -0.56030351349120854909;-0.41373810206499950226 -0.71232451716455857937 -2.9852137426756328864 -4.3589164391992936132;0.78014234175212260336 1.2456902605462714106 -0.26874818752070989136 1.0237035890428389795;-0.027599514520820808694 3.8619842030254813992 -21.583853543315161261 -7.9296471952613565293;0.29256312800623290871 -19.58205164529307396 2.980728554899404692 -37.929092971885864927;29.243292236474854207 -8.7493233187439471976 -5.9453605532137636658 0.21100302330515607885;0.55873799912750143903 -1.5346755840781802771 -0.042131049031313476394 -1.2677632765464119657;3.510850927026218482 12.84042944715655743 5.3732578770891263886 -0.7936325481265941173;6.3885058493303663596 7.6154178647259875845 -0.34716768535678843577 9.7305047944552320871;-23.19573688001264955 -5.2701047844421573529 2.0855998115422109684 -27.246063485333987586;3.8378255740073168312 -2.4728782180987862738 -0.44347567843716073632 -1.3515072775853291809;-8.4390580539918733649 2.7795881744968893301 1.3017874671334210834 0.31040045391963838606;-14.920728138871245605 5.1850985534360587437 3.2806512812188124428 1.7324412258809447351;6.1077317742934607026 -2.3964024945831372548 -0.38042651842609231938 -1.1742989870374118677;6.7907115553266104158 8.7911768138010124574 -17.529775672341767034 7.3420490577343882066;19.330480051984284984 3.431661032154758928 -5.0837067323295590526 7.3433196570883509935;-10.667397736837447297 1.6064949157020158577 -16.946462049836469532 -8.4076194292371670969;-3.0299750077020424222 -0.78387411359176539793 0.10634554585072600319 -1.6178366531587686783;-14.163259001745776899 5.0018256943189287611 3.1425802620521734454 1.6996746774463380447;22.453273103495671847 4.9727869737321626076 -2.0946036781328549736 26.8388693980826325;-0.021312395572433261853 3.8261426642938918263 -3.8431973601518940598 3.3068165911438742732;-7.2448698717640631628 14.46684003469982116 -14.392315307250926892 10.010657688611086513;-0.29770886933397272545 2.6899407757074142999 4.9933069464055090947 0.15723206693808897128;2.2449317970221964735 4.4644315069802029683 3.1192398396986491527 5.6093697150191932366;9.6358011478272516115 -3.4586875684972486766 -1.7101393486938420985 -0.45603358329250193171;-1.3045164499479879883 -6.4185973634652606634 -0.97725309360400081093 -7.456604104637067465;-2.0721955034388379602 -0.1325552118244939237 -0.0026565159399586976002 -0.26952770527466451966;0.21775701349884554747 -1.6173782310366373594 -2.4159128997734429234 -0.33813225447928924039;0.6654327966256676774 -6.5742510172387653711 7.7775705172086100347 -5.6413032564597154206;11.181761909576483305 4.4394617512680740745 -26.061407848588757474 -14.990534502901946112;5.469117656124853788 -12.371669680860478024 0.48443522228916974237 -9.0686359190949499265;-3.8825841173416040242 -2.1776857038400723177 -0.78885033894148381961 -0.90133972768749837101;-1.0020967330187846578 -2.9774172562533380848 -7.6240735540778707957 0.044491458669910090296];

% Layer 2
b2 = [0.57805173098467255155;-0.35429579294406943202;0.33608039465887717956];
LW2_1 = [0.12605468741291017687 -0.028620991449207735385 -0.25843220932409027846 -0.50530334498676687804 -0.074376054775591587953 0.18186849088453152512 -0.016279945585383783641 0.079583964168090451374 -0.055123204352547874874 0.29593172270537043689 0.11392279773762593875 -0.78271237768179890981 -0.12828257806676615638 0.057763544571773572933 -2.0290598639084307386 -1.836199964087323222 -0.97691203654062230832 -2.0177892256615432842 1.5765729438005364749 -0.041072138384481864104 -1.3779235936267113516 -2.0233397492744487067 0.16124287185049909765 0.076929040576029686371 0.0039525934919307868093 0.082942483091041435683 0.1798605803049773133 -0.0016338645202957512072 -0.096609594656572594928 -1.577951736973517205 0.052170697817613513603 -0.19749817489731072429 0.031963152697040204953 0.041641669073453749239 -1.0261301855306723674 1.8331187645781861217 0.039555018164392531654 -0.066052248207758956777 0.015474168600601169443 0.4839543173722399283 0.86565682685490064063 -0.14013914719123826691 0.34708659661735019597 0.21934670472564476995 -0.16341971052157883149 -0.012156605504175325635 0.0046613169426046761543 -0.14051867582407973067 -1.0699101971574378478 -0.0086562031923246018916 -0.089489633775142393701 -0.072496354017324585173 -1.600719790209521376 -0.60774170813138528313 -3.038826645001807325 1.1581890235541860701 0.004178837862650571118 -0.031109215301452278896 -0.0024227036667445393629 0.19969158491634986241 3.2025990669151851442 -0.083602908013074697657 0.023469905378837242066 -0.0005268805567899405122 -0.12693006025186151509 0.0027462088471625544991 -0.18066187892171037266 0.0059497434116503860463 0.93994418271982360658 0.20296630066131687853 -0.027864458988451065724 -0.020427671532947722088 0.0034573619969026558527 -0.16463017568571161608 -0.070874420038475036132;0.19817701379726515576 -0.041377984407333576189 -0.28583528819472109328 -0.051685724775368327433 0.085876385400433019601 0.052094413941413258984 -0.036716899685802967257 0.16654315218855672565 -0.021120411575039622215 0.33606776032455937253 0.12364752861439927412 1.9996069912579017558 0.2194375361590086837 0.10186990772070204925 1.4723588237466016526 1.3528104629046080465 0.024749587412544325066 -2.9720631147838028063 1.0543991460340065291 -0.14140854170201336282 -1.2260548537210820275 -3.045939519361053005 0.16242023478059139374 0.013081479158049386102 -0.024468254282765170698 -0.0744910036390479674 0.052180996383077320189 -0.0039514297184064578125 0.20907552043827737354 -1.0449682940766724659 0.319673956435759965 -0.46875860721834244904 0.044245387090847826395 -0.52948750069935390794 1.8255953029999061332 1.3580863817435533392 -0.051814513394360793563 -0.10655205369493439549 -0.061407868261884691885 0.6925078423148788298 -1.5628854839076584682 0.06219501094732522023 -0.02535694934449829116 0.50675436060896572599 0.91706171171976169632 0.0045007898654565794971 -0.024675214467960046583 0.12507937424353929301 -1.2755103933254816617 0.005752877166283991775 0.25182184920086825297 -0.10808244900011355905 0.17541598174757752626 -0.11524473345471568375 3.244432839446594663 -0.10459174842722937515 0.0056757480758356246633 0.019099603306782019646 -0.0017410670060183208296 -0.16625900111900562828 -3.3709724857684477684 -0.097861390438265222214 0.11843370038845031644 0.011600063965570563476 -0.4567908056372531056 -0.0353925928503955739 -0.23967079066451979497 -0.23838924076155265652 -0.41964531772123192521 -0.41496351499200501145 -0.027762614602361523203 0.0084928477560844029687 0.0597702258370286163 0.15363172016231144146 -0.05622433044862185092;0.045891769158178573329 0.10573466655279185888 -0.11865824922876364034 0.2990484029844114322 -1.0439572360864697309 0.26083177471806506809 0.22554795309549405258 -3.6514927323853458851 -0.97873131714130967573 -0.14717424892046085394 -0.035362387949755866301 7.1412770117244077639 -1.6803997128894319069 -0.088860358994858182347 -1.1734145461009140021 -1.2326195940020185926 -0.81974123630516704253 0.11987375029953008243 -0.38121568394877919372 -3.4998744723293908621 0.67894817156587961016 0.17846755457722043858 -0.015222812877863738795 0.17183994755444925717 0.75043153933158646129 0.025400021443534114007 0.15217184269366124116 0.2103994352830770298 -2.6261726655963384403 0.005206867669768112071 -2.9374302278689894408 -0.56109854972358896852 -0.3558023137102109823 5.8025624408624469908 3.5117979362769404794 -0.21861522002130284736 0.73564480079065985851 -0.046192397880635810425 0.34877785846585235285 3.5952191575673468904 -2.9016389013762871052 -0.10484017221715705159 2.4356006790159896447 0.60486922996691394605 7.2080739739329375837 0.23420285113739658378 0.35225671996749785553 -0.28100712965294211143 -7.7669913641403507398 0.12221857793401158521 -0.11101793662325695755 5.0012139736316658656 -8.7331537243312489238 -7.8012215588873257133 2.9043539624586345305 6.1472561712693938318 0.28596544984010108248 0.24667402968433968513 -0.14881006978092339854 0.16328082916069697195 -2.587700577943073732 4.9444012640286114646 2.5917330269115370633 0.13972712014613028475 10.98471002513449335 0.23696123640247909736 -5.6248657152744563348 0.24386387315081325955 6.3587750832614888807 12.334935189494718344 -0.77614041554597934525 0.43149196410139456503 0.4956808467163001386 -1.863870453241615488 0.33003114371456171439];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.533787165877804;0.788527964418997;2.25106301047751];
y1_step1.xoffset = [-1.82517310309568;0.576613863304083;-0.470200245018933];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
