function [Y,Xf,Af] = ANN_60_100n_normal(X,~,~)
%ANN_60_100N_NORMAL neural network simulation function.
%
% Auto-generated by MATLAB, 13-May-2020 19:21:00.
% 
% [Y] = ANN_60_100n_normal(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-166881;627;-105928;629];
x1_step1.gain = [6.4553820133691e-06;0.000655522779416585;8.43401437999452e-06;0.000655737704918033];
x1_step1.ymin = -1;

% Layer 1
b1 = [-8.9478900219948780403;-7.589730583539382458;-27.064571723707491202;3.9084931519355454732;11.497330932737678921;8.2215585365043679644;17.239959565148140541;3.6086272066958238192;-5.5986231455196620033;-6.3284135827581273759;-2.8190632193655900117;4.8312538554207451469;8.9170364462064348743;6.4747662248382056305;4.0914101536268505654;12.190323384465390433;3.2723887540039005017;1.9522881620287215743;-3.8548846094159663345;7.9732117612186801381;-2.6706431463653279579;-3.7828499651696043671;-7.191890590135626482;-1.6196283225814667173;2.0346502017526209016;-10.840324216517892353;-2.1435334322828589748;-7.0706458752588696726;-1.3026854164825489857;-1.4437684927231209109;-2.2047508651996539086;10.207712330256233813;-1.8703102321919566897;6.447053389935001988;0.60895746624806135205;2.5243009377862217768;0.72325692657832396648;1.005771340480515752;1.6010619423206502443;-1.1567408099880964745;-0.38652260007071737036;6.287540058792164821;-0.15542551004134111392;1.3874096117611842693;0.14068835633249837658;-1.3806261229713747696;2.6055291067195867072;1.453370309661663029;0.23846196857920837209;-1.1392138492037944264;0.51158506818533311389;6.9306274028834673473;-0.52239158728237522489;1.3089409233397204524;-1.3981924614241125759;2.4609298187240269407;-1.4205906218782640149;-0.85208461750254183009;6.0446759446858662201;0.20545295211869879504;-2.7527917186579275999;1.091006706409053173;1.4582994870503651619;-5.4308278927761026722;7.219457936835793177;6.9271991030653392585;-0.55624160524247912019;8.0614002978533338961;3.0590622107184581857;1.4810881181072330648;5.2083476084934465788;-8.7546803941311139852;-3.2654980001261013633;-10.498036609720218237;-12.04889463633865887;-6.927880193373199269;-2.5657105049087007842;-3.5104374050287985298;-7.7743289875822361168;11.726020157432126112;5.8814143699641512342;4.674829475344136398;-13.739915216180460078;-5.9456972740967630742;-10.016076008556911603;-3.0473377069796772076;-6.6417262567341763813;8.5138773792316442268;6.1716703027173727136;-14.83722880061555216;-7.5507101386604400517;7.2650228441781123934;2.7675940096194464601;-10.747351697879485855;-8.1759667531273265695;5.4747978281452933658;5.8435673236433416378;-20.624772423390712817;13.272471694799781616;21.419474860954291984];
IW1_1 = [10.153180117138489891 0.68218855304931924621 0.54323273818116379896 0.17127553125179967308;8.1449493738688722999 -4.4952061512234315899 0.99918551234442209985 -2.8616687444831172549;0.50280982027752485486 18.886641530431074187 10.735409142819024808 16.121495636638268678;-0.58162603875541840637 -1.7389599365842034473 -7.0823010179266612241 -2.8210098986406180188;-3.844494222850757037 -6.1952679021461207753 0.61277998858221649492 -5.7166612919476964549;-10.278187665820995633 1.0627137406203366332 -4.5025459474782927316 -0.87113726234434896156;-7.168876944269698015 -6.8246053251340299539 6.1285277794390404793 -10.652104695732713679;-3.8546743623753414454 -1.5106587200862904297 0.45689110583729947157 -1.1870727051417482301;-0.65002782798975877743 7.5312822482487558062 3.5362509310570175991 5.2539700032465077584;1.0776362266050130145 3.585070502406643822 10.302461032105428629 4.964474680921440175;2.4834814613815279216 2.6530126307350490045 0.13669127121805649261 2.1558679056132388219;0.018854803528363411891 -1.1060584557406540895 4.0937228895488217972 -3.6259363453628932206;-4.223252365049670054 -2.0065167111118888954 7.7962470146142059946 -4.4889263245588031381;-9.4420098876402960286 0.91837566091632505394 11.844963600500413747 -2.797980234994172033;-4.4755459906712493634 -1.127659847854384001 0.35858271602072716577 -1.3621497135654396793;-5.9391320714313859952 -2.7999536088260157385 10.552673426865398554 -6.3496709476874695355;-3.1682516835887004625 -0.86587564816571238602 -4.1326594868029840057 -0.14875599880819656562;-1.4952823283379872432 0.88209742737250829148 3.3591869258769944118 -0.024922213410259620031;-0.79767193030659344632 -3.0843486877488337505 -4.6745560538484740576 -1.3320857208248082504;-6.0350088856526520331 4.4002904928875272716 9.097446172555562427 6.0374561489940941073;2.1495096708090950521 -1.7524508517125441109 12.8489014437217417 -2.4995111418385960178;3.5264331861164945892 3.5448223625527126579 0.21438908193952094239 2.9458643969432403154;10.506858538778816481 -0.89754667403443388896 -13.318259174553064739 3.0090041070293014336;1.6442845327584236781 -2.5934669487663404297 -4.1902870421629465625 -1.8213453757470459138;-1.3227691832687173967 1.5559439993861814422 3.6699786778298881806 0.2263192458899380699;5.6261899052277382083 5.3098738871430182229 -17.21993219560428301 13.184659310544006416;4.0290483551845097665 -3.1787880891343336387 -1.5245701459156193458 -2.9047254525627028698;9.3644989270095493339 -7.1314427266831161845 2.9576733170635858272 0.94417626014645328336;1.1347075965967539091 0.32392862302680125453 -17.438818078888626673 0.80568658971728546181;-5.743659745323601129 0.77919569478288874809 -1.9969364308176111855 1.6440444752496230496;2.060395896659987347 2.0029413593814613392 0.21953970363495489693 1.6031666101907473543;-7.4662765643122410708 -10.493763949106490685 0.94568345340790838094 -9.191762977834113002;3.409969456281901401 -2.7575855711875987275 -1.3028679098837716577 -2.5066100524366872193;-0.86496627589795027635 0.25272229626655129398 13.819896970259033964 -12.257258339280518555;1.2614130745608378437 -5.3790653835723443166 -9.0644277858657460456 -7.0987963132917659692;-0.28374394199223312851 -0.41144348241594336235 6.6314118710918892319 -1.083228732223372015;-10.092749516362596651 2.2689173158001425534 2.0494461795690344097 4.1761276280822876572;-5.9550655132532677172 2.1824093368021162398 -7.6003592939966262421 8.8006646386834503915;-1.8396371571355079055 2.5775530815977942822 3.8002357105576729523 1.6547710153398835775;6.7318172203039745582 -3.0905412994753342915 8.1450517258064660808 -8.8128635709849358904;3.6729382010203845965 -5.5522993746769646606 5.9357698265371530155 -7.6658946734552548818;-37.558111859603933169 -0.63959586761162290358 -2.0356889622646168192 -1.7616069900650954683;6.0015390976023903491 -5.0570407930440488542 -7.6114116864677017205 -4.0347922541497576177;-0.18744129904712764079 -2.4717748505346732735 -9.8486854007034416725 0.24793946215053869198;3.2346823357906786534 2.8554217204147711584 1.2114041298801909718 1.7893676604166588451;5.0183837275335028139 -0.025129593049285657569 -1.6341720392998693168 -0.55355368687649619819;-0.019798458722646735536 -1.3444312781856277983 -17.382029260617674282 -1.947000320015150665;-1.9051861533985006147 -13.662822994579796543 5.465914968390243267 -9.2642377738490733208;3.2527668074047140223 2.7006600608313142686 0.98857586024227583898 2.7679384254720944547;0.13981392254273311559 2.5459623512895084296 8.3449669304065832165 -0.43028501342586888967;-4.2083506292962731266 5.9038258806745913532 -6.4804572279758190234 8.5788051782444654236;1.795518818468524902 -13.817220490916016118 -18.944445996406333421 -9.425626823647624164;3.7659435145479354112 3.5609558133180052586 1.5549368480419030192 -0.39635645039566758108;-1.8513923808626171486 -10.849123718446863407 4.6013970979702891739 -8.1948103518755264218;-10.320783742201742328 -0.61418483489926412044 8.4177973990997490006 2.4367037050120723407;6.2571203065960911971 2.8394249849963171251 -4.6257866789647339445 8.2473187025255327853;-6.4316092480005755405 -0.69361814441389413322 0.040205983577979505228 -0.87426633880657078635;1.2284975991920106253 5.9685578489348554143 -2.6973274913900131544 5.2116846226698996247;-0.560773996542850095 0.45781936598537109617 13.044971961560703377 -11.70844768544583836;0.52344413890742436113 -2.9424636408429725165 1.7302875107255566434 -2.4430472350514369495;-6.820613328742715531 -3.0854813161866623261 5.0828348891666852438 -9.2314715974388672493;1.0295677926672015534 -5.5111165981817560322 -12.222989513416520069 -11.922470292536347714;6.4784843961629254849 0.82406265438591663752 0.007793525822231847644 0.89176008176270982197;-1.4145642123445363314 5.9811020571869528695 3.1862262686679310164 5.7695929678575588184;4.1896565772019016549 -8.2119233565346281267 19.136993465458104424 0.09055261247134392677;2.2317622836645156781 -7.6971177697020474184 -4.4442024310239798268 -7.3940595139385552059;-2.6650192681519495608 0.54949415411071067528 2.2651447193278282377 -2.7922155024713117832;-0.37402888549589408118 -5.8229188239635449875 -12.794070693666848015 -6.3486345136563482328;7.8208793871456210312 1.0713411126957093078 3.7455380321719475845 -2.3083835958944352029;2.7550072667125631298 -0.23910458276575755066 -0.73489882675467288475 -1.0699001568390384964;8.8785187588408813752 -9.8876674630440870573 -6.5170711416810078731 -5.7006373651929305169;-12.137725296752970294 1.480569910271563927 -7.2863245446575790609 1.7994657403503460102;-2.4432533575511028445 8.7221984419731004579 -2.9072248591534108897 -7.1772397623519212928;-4.6037151533885349863 6.7655635724858029789 16.543932558462323357 8.0266129545889839392;-17.932008447851313093 -5.0758905120045589854 1.1900019365573242247 -11.665214371623264356;-5.4580147295298653276 1.4997883396748228346 3.8190963392425625322 4.0483522057831198282;-3.8413942560903788781 -0.1663892928288385753 2.0445407902469199257 0.6390486100592603913;-9.059080183455341384 -1.1028615706898796667 -4.1790406591503632683 2.7975067128174662123;-10.430806471490415177 2.6545449108735383881 -6.8919860338517375808 0.32784296857391170832;11.202540644710561324 3.5097919043558629681 -3.4496102429737569572 13.441506580669775772;2.0331550533735640585 6.86810103914029213 -0.7942805408927479105 3.9055393684753347827;1.547622093750649297 5.4693639430387337441 -0.61741485899814119165 3.0902322702924003295;-20.088982339241034936 -0.056177387121957092497 2.1785963443519347216 -19.67697890030596497;-0.81319619966127509869 8.5516197194277889793 4.0465231947781843402 5.3062590112733083458;-9.2257375182639993483 0.93931151620743802422 17.858869124460543532 0.19459180573833811945;-0.58172753184756131883 -2.3620238696592474881 -3.5437772671480085585 -1.0263458551967310495;-8.3502858318840580409 4.3399269488215059809 -6.5290924051287761998 -1.7736324476649742987;0.84900092750395550478 5.9942514043296730719 3.141269376839076255 4.4093490148636771409;6.0072494870349695262 -0.22329813296779460474 7.1639591458718800965 -0.76967938320884621284;-21.375540005483397721 -2.4196351510454099376 2.3699564905354968403 -18.888702009751824562;-1.8629715997448779152 -3.2907129682525666503 -0.22346300695440177164 -3.3598810784499510973;4.1173169334345391945 -8.0404964545781414387 19.177516578584096862 -0.023854939961229178202;-2.130254127515187168 1.6511104457979681737 -13.419647788797620436 2.8076069088547410679;-13.068062096163892249 3.687686252000279552 0.2200045266913130404 -1.301204232832554597;-6.4306466956865167006 -3.2317808801339777958 -15.067325294945245417 1.2836063802100117215;5.426080187294695989 -0.35994945348538487373 6.0827794965415487027 -0.40794626760662705545;3.7688361187119676643 -1.2685772930966279226 -3.7230345654338128369 -3.7998311947142728862;-18.338036907060814684 11.669970249545981389 3.8155225627724353998 4.1151715689354819716;19.393614259396358079 7.5183651562894819875 -1.3593757843394882467 10.940562901300140197;27.681204226751763287 -9.1372879016801302754 -6.0722251485387452874 -1.2875642969623402045];

% Layer 2
b2 = [-0.28713712636235472209;0.57343285944646316121;-1.6386334379714935228];
LW2_1 = [0.24839430603156986699 0.075656592966364788477 -0.010588564722569058368 -0.0275758549191268236 -0.05725809919709169693 0.059490089568227613737 0.0089634409597282443949 0.11875202671194429183 -0.21968281112350759865 -0.0046256850217782632603 2.6620071438549506304 0.20748365067785093374 -0.25315599271867683662 -0.091226676914003934638 0.20086330513122191421 0.12657538534616186165 0.031056358942998692207 0.25182403104126294124 0.13306177257942497505 0.017721849866535119289 -0.21920837109636567841 -0.62453976395593935322 -0.065957227662999814988 0.14175986629580214493 -0.13167668240929036871 -0.0096777045545961750544 0.55862460641451827659 -0.08499032861118428761 0.006473024600766250948 0.0060222900831391253801 -2.04697808066169884 0.19695127341953688749 -0.62422078976768247127 -0.059363604179767104352 0.011955989814170980834 -0.035967314054414153968 0.031797356556457857801 -0.20888695720434422021 0.18718620915991696085 -0.21259854332779823394 0.03258579850750282364 0.12322875623901510811 -0.018005808191630733733 -0.0039855916704692349525 0.19548598520105314735 0.077585143578029161504 -0.022476444329205404193 -0.0095018906407786443702 -0.21491479666708493412 -0.020992166024250798889 0.055350772987960018823 -0.0017755289773613417738 -0.034639310528753110285 0.083634578372251175415 -0.030840552663039109971 0.050550668115169838934 0.25158651714246776931 0.079593946477388641259 0.071882808222845942514 0.025723141467512002784 0.015989330054947369086 -0.0070819467436611556466 0.21208814499465389325 0.29506268398275564691 -0.047126167569899533871 0.16008587521725614611 0.027553198153639674867 0.021264300805858067644 -0.021958951500647822669 -0.47974921993021457656 -0.027258266872477922987 0.053239979852720394071 0.027617719346177533463 -0.0058792628912436410704 0.47390227225240294517 0.23004795481044271188 -0.15975564262024466444 -0.039907681864099014968 -0.076952788369048952255 0.024838285472039905305 0.63186700641449733418 -0.73952322668321879284 -0.41188000705104765853 0.09619321641318261118 -0.0023717638837877849656 -0.10106944604707066016 0.023009880293689020936 0.030233556651754027456 -0.21072435400896302737 0.36265788849781449565 -0.14101150053168123866 0.041270473423443997107 -0.21252456882800530025 -0.033737120780558939315 -0.0033951173120941734347 0.25147162429846375842 0.2021613264267442811 -0.056325536138586054791 0.38149884953183738068 -0.10626897270700580433;0.35744262417037087065 0.064261312306853460297 -0.016022016384258080252 -0.08756143201513690022 -0.20197138849820220341 0.17476558585185519856 -0.0088807584692702640217 -0.23141918876485781387 -0.095737176444182461865 -0.049118382465921796298 2.8149779651762778521 0.084236460104025148721 -0.34852521300051830799 -0.29218421932190807855 0.60053374595467490238 0.19303144739717836842 -0.082446461864006753695 0.21183724746181586962 -0.21868150042179235193 -0.010142447607336312065 -0.13943899891028394 -1.219830541779681754 -0.24677578498842875354 -0.4272337707365865267 -0.0099039598759603948708 0.0091332397338861077279 0.98084516468664928457 -0.059576395501944885702 -0.013233715343076905488 -0.030208672120448774867 -1.6222719305243911148 -0.024223638168323780723 -1.2396203639381428996 0.13553208751091219697 -0.04855889129760764672 0.0007791719627395416771 -0.015168781381259464208 -0.069550525257353390529 -0.44806835375691489443 -0.083736684553097753825 -0.047325455902535090713 0.031334566547509441758 -0.0034076845429600469486 0.12842444820605886102 -0.22581066562279955567 0.040732227934444711903 -0.0053317745565823575216 0.18652658225534715641 0.29214407493918442826 0.11480218712672891901 -0.068759718965872587693 -0.018622214102485899756 -0.031055718676019365004 -0.1381440399357937443 -0.015264444896173316388 0.023598262699232378653 -0.57940671110290420387 0.10803332840330535924 -0.13647542020694869436 -0.12087923074983265848 0.077059361782350052628 0.032402163170035858109 -0.57376586979853472226 0.41278592988551415788 0.027830412874994558264 0.20501788699727194198 -0.087925625640037544106 -0.005340506347026372988 -0.057117029226957050092 0.15785948353613071804 -0.058016331659743167193 0.057941032233118930361 -0.0058982637384045657342 0.0070753049656580978971 -0.82749544406491748472 -0.30409902692320911477 -0.11020184708255618966 -0.04352628422941289682 -0.10583734765009696066 -0.061329862578217653191 -0.77391623391830610679 0.99402564104873103457 0.50314206637994940419 -0.0056192708414616356072 -0.029879240824873788684 0.35164168102184334419 0.047118792714568306923 0.18288751603345512753 -0.46928440630660100963 -0.45950914936015596624 0.78500553956039076375 -0.016955437469934369482 -0.13216058045414019739 0.10823656732412338666 0.0024099507712654006167 0.54495048067851947771 -0.42750733533712897971 0.072975377652940973117 -0.68193837648253363692 0.12505142724719611746;-0.068302985789930367733 0.057091713094631818537 0.37970093624188805403 -1.328978028966559588 0.92866606422389019748 -0.18866875136230090715 -0.60841932449183033782 3.0211017630197729567 8.9875287158831120848 -1.190821907118945866 -0.059523522670601333728 1.3999545152516437163 -3.1623131162488857804 -2.5563323955373240537 -2.3394688553978775225 2.2304172210069355131 0.62302398123162838761 2.547625733956409011 2.8817371173367578585 0.29425160982949299937 -2.2820748734992815088 -1.1544710424038493457 -2.3320227611811925605 2.5881958022983631018 -2.2237886584356409969 -0.20697869145811928493 -2.6327326372565953427 -0.16442337990859520747 0.24077058472152063073 -0.20904864989010688014 2.9608006978716607804 -0.068658444132578613783 3.1040465937717560685 -2.2974977187239162824 0.8588952263736935322 -0.79966943553957936519 0.27480075871075498872 -1.4835246854257035931 3.0907708818493122571 -1.5143722664009382495 -3.6710150497572158201 0.14209725886139581985 -0.27378834524534823025 -2.755352856243411086 2.8710559079623796386 0.49143279356720892537 0.66745620514045167493 -3.3392253585491342704 -2.1456249337580666214 -2.3783996882984506094 -3.0052934832415987287 0.27427456096429098098 -0.58332595577764512207 5.7550376868663919439 -0.23020846413176210277 5.0303494038889224882 -3.5463237366615887325 3.1362928818143820386 2.2407403897323807662 2.1187213810096805489 4.3387170982700755673 -0.55445810583560983797 -3.3596664583509019408 -8.3077522595511368309 -2.2808087479640066775 -5.1720060092566644272 0.70369960241445395077 -0.5293790200176404781 -2.1475061828769304029 -2.5139031834551692768 -0.2000694051498261572 2.8680734648430061817 -0.41050417900634700308 -0.31020725007418764596 -7.3186810252817124933 4.6361960378236455327 -1.6638568123047179359 -1.9146455343491266543 -5.0734617485425062 0.17700173651886261239 2.8180607272268249908 -3.5635325994912201431 6.9099290381324802723 -6.4602470977658450479 0.1854683268640164584 -3.7300634451196339469 2.3902497872267405299 -0.20530753270956650369 -2.0175816780572510822 -6.5345745558926342511 0.41325593839816421315 2.2204983893933110117 -2.0834350100455227839 0.38332369205819999403 0.097083510873834502619 2.8199162460732676294 5.7810447711749679556 -0.29168160457680875064 -6.7837415386743442625 -0.18967850374533412605];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.533787165877804;0.788527964418997;2.25106301047751];
y1_step1.xoffset = [-1.82517310309568;0.576613863304083;-0.470200245018933];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
