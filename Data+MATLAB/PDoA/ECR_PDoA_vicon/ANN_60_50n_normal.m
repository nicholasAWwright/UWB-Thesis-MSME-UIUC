function [Y,Xf,Af] = ANN_60_50n_normal(X,~,~)
%ANN_60_50N_NORMAL neural network simulation function.
%
% Auto-generated by MATLAB, 13-May-2020 19:11:06.
% 
% [Y] = ANN_60_50n_normal(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-166881;627;-105928;629];
x1_step1.gain = [6.4553820133691e-06;0.000655522779416585;8.43401437999452e-06;0.000655737704918033];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.3398344011366489781;-3.7313708369746070304;4.8561798432374141399;2.5720941289571248589;10.20385076462983065;-1.2917405114515840836;-21.355412273680496327;6.9994073998264116909;-4.7666206841438611974;3.3961878223659627274;-4.2670025617032392162;-2.2345062499490304653;-18.551778981735459695;9.7471097062024689706;3.4922992013062499339;0.50310868153415888582;2.0313286208675571665;-4.5864383353927271614;-4.6365016353651942183;-0.75210915158276414605;-1.9431058654765867022;1.0778558572319092423;-0.29676896758352422356;0.041578548035045029274;-2.4024613705170847489;0.52121979562626219451;-0.35209767893619869916;-0.72929625024692534829;2.3382390041099001543;10.101219844504029766;-6.9550010959581420877;4.7062190311837515111;-2.5174071016703574166;-12.707744376378364848;6.9711394668229713645;0.36076390782706491134;-7.7531184608943188863;-10.24036465372194904;-3.6864068466559070103;-8.6202799626575252745;9.3476931161064289455;2.2118403180228054516;-12.509925975265883125;2.9441896495079431517;-2.850452772652263711;-1.6136381736222524808;5.5570865762993397752;-9.9006223520361373858;-2.1302593636456372828;-8.1830258098814230294];
IW1_1 = [0.94887370154077821383 -2.9839699495812994634 0.67859650888892675269 -3.9612825117316416978;0.20649218283645653926 -2.9721119338854946612 -0.037581593036733695889 -0.80389371997451930518;-1.1500379819469512821 1.5024925368774910694 -1.7498864716826429966 2.2572894444690256854;-1.1934284406927488931 1.5337954494906875791 1.8867157248745975995 -1.1624380005360663848;-13.158756039758543466 8.575487740862252295 -0.37894704195865624996 0.62909736002759764073;1.0306774727536416325 -0.71144544214757376999 0.18526402855964058114 -0.3271232078157106371;1.5199742584857902639 15.563752754739342166 14.497368114802247518 15.761051422347652107;-7.5071447865711462555 5.3057795205195867894 -0.094964343465735831518 9.7329588696792885827;4.2268136917367282734 -3.388547858395824619 9.3562222033099278207 -5.7757342129997715219;-1.8934537845825452074 2.1339667694770376727 3.1443328968279486979 -2.3633290954625398861;3.5105557971129046635 -3.0409382847667822958 8.6577995395379527821 -5.1724943049520994975;2.629559276551782343 0.55690828287452875944 0.11691359630856093532 0.93045978513762972462;1.3285732919391863849 13.999554054788404756 12.910889964357005866 13.202391107770985457;-12.713109959181251085 8.160369585320808028 -0.3662325234107640104 0.55227134001938926744;-2.4390992949427023895 2.2464632468089389405 -7.3256603098579109457 4.6106472242699112485;1.292241589777890276 -0.91971573828025088293 2.9020042963547525439 0.65921059571264140065;-3.192890833318072108 1.1458726442836240089 0.99963800415929915388 7.2668868422295540555;28.864481720545615673 1.108384473476182519 1.9947672166195227206 0.20213861147265602125;0.15487243138260947672 -6.0096144689229751279 29.413968790538074671 11.315872783304277149;-9.3421960955828105 9.5274748713699750624 9.4641186580079494917 7.9344570630624273733;3.0264952520018466586 -0.84408611634786567812 -0.97572362737001039346 -6.6961331949386728724;-7.0914247144837121439 3.2191357341004276371 0.072685815538678047454 5.318435745277376725;0.54872189081513422781 0.19852400908002360014 -1.8896397338627310969 1.0056230940356127856;0.73445523144144242433 -0.017218099952419255172 0.29788544132750283122 0.059836549935398428146;-5.1969029535583208812 4.5011258982943207485 0.019292303990858458013 3.5677620615524738845;4.0752451224893686543 3.4590661952830519255 -0.5210765918450812606 -0.57385325414021481905;2.5870058417594616884 7.2528577138162901861 0.39432664519790261437 3.6934872531344855595;2.9313422240523001605 2.9181863583167158005 -0.25664906404359072445 1.0929182511648605214;2.816082194801151406 -1.4389943455596707622 -3.2050243864360941082 0.33611708675086648945;9.1541154201998047313 13.92049794397889606 7.6519238184483233667 11.172655129789134776;-4.9441203798240520584 9.0856126068944647045 -0.97110433606435242471 5.6667510197804267236;5.9363694439928318403 -0.38033467778280355409 -0.20818748039535253658 -2.6587929061071040593;-5.5923459070093608503 4.9024931180023436639 0.055598595947602705292 4.0521356592758071002;-11.555423252628171937 15.806290129081345341 -1.2303962035365207939 12.106559248821989527;6.8050121193124812891 -5.6377154411167538228 0.72235356491308999605 -4.2137673572015854617;-0.13830052106006121559 -0.76073891360506729065 -2.0559092444377480291 0.11908433437511538322;-11.241838805471944696 0.5452361461939121412 7.949072346751796303 -0.62947206235958319542;-14.779935872099660088 -3.0699909336919879443 1.0963924890926997069 -12.886389195138283625;-3.8812180684045034518 4.3472897852134098073 0.1909726461368547179 2.6342337886730855523;-5.6020911879184573934 11.250963942139609486 -0.96604290972872441934 7.0741724807366548333;14.335728865224655948 3.5526242435552171095 -0.21471572499679159041 10.543371892997381423;2.2187583536893229486 0.64863235196929625026 3.0955252640179446999 -0.96898743010568400003;-3.3572481793461057542 16.720846725344731709 -1.7927996795359775195 9.7799107406240750606;3.4812298819394000837 0.25243497619860155723 1.3440111088912958248 0.23555768492068845932;-2.537168943353000472 0.8742497118685290669 0.013038658796921738514 1.6990968810947588707;-0.62952110240652303652 -0.61122047128562739804 2.6463193742024397892 -0.63045482877340908168;1.0226802767541656181 3.1727131682476574781 9.4614763921628721732 -6.1499363804725799554;-14.671741553247892753 -3.0610954773946632557 0.74544984762442878523 -12.185220804195163069;-0.047702483834331149692 3.7438778160920480609 -1.3137141525710933632 -2.9556161575460926372;-7.6508104965638912276 6.9164211544284501798 -0.80280563433494211978 4.6525074953471365902];

% Layer 2
b2 = [-0.11692305384670884094;-1.3494654897370050861;0.92819160730434957518];
LW2_1 = [0.061901263759661186159 -0.3516333314699431889 0.08285374692345856551 0.018698823381798949927 -1.3899989177810090357 0.52234346852000390626 -0.040959762264476909377 0.09262375794712136845 -0.11214415757157397691 -0.056672084848726878015 0.14956345991198602419 -0.26059399440018199412 0.036578079464014673361 1.454759858603260847 0.049696182543333911052 0.062599830921185567467 0.78005491124745174325 -0.090183264375668412138 0.01275887324624469521 -0.0042436255941362393401 0.85220482703831901272 0.11133226235255176684 -0.035859704821944587971 -0.7698079279744658443 1.6010353155159240401 0.052146817440655274245 -0.021407445965152909623 -0.055572994421124552455 -0.11508528167227299877 -0.0090758121130163731116 -0.60706904144927187339 -0.18419764183723383311 -1.4038468209411569809 0.066568847030313627045 -0.10379320506012619518 0.0075041272118751946654 -0.048847945888806428016 0.31976621551535799881 -0.18182104413942554166 0.53749871666048509855 -0.48419913159513799927 -0.045586281667418099284 -0.002357573086830729199 0.16254687141636228742 0.07086249348981588092 0.051438329089526939331 0.059984553358088069097 -0.75697737961581545996 0.004332531795022466839 0.028415090653155682804;-0.13273030142489816718 0.026296888134244966739 0.10458816111468197119 0.70511214485438888921 -2.1317953824264312956 -0.60639889335448815544 0.17325647926874804261 -0.0052992277221597426998 -0.44351986298744999759 -0.27250527031464716332 0.71527657492226015545 -0.32244036248604179828 -0.18158242305146102269 2.2435923090778384648 0.27709583626924594313 0.026333801028038585773 -0.31783489429711531127 -0.02955868875047134095 -0.020045355511573451079 -0.023290736312904694594 -0.32410896111563930466 0.17994783305661854467 0.2468878541563487572 0.76365435598354725055 0.84947166091892811757 0.069983697107082631916 0.021419022961553305096 -0.039703978408317672222 0.10950725276018724585 0.012038529138484622277 0.39149589218941482915 0.2169572521894884698 -0.7049499244929142705 -0.038955327058769487203 -0.4911586335423710481 -0.15361805212681872712 0.010668640661037778403 -0.40757104149560269279 -0.18086420323327973003 -0.26639394239222191629 0.67284517647931696427 0.12700334415889388828 0.055207932876956418433 0.0050299118709489576765 0.31468974190171777883 -0.15181142125445987179 -0.048215915135963197113 1.0164785986829649733 -0.02082543697707777558 -0.42424097961942680568;0.78351892464675176875 -0.29732131451087445706 -0.82288539129867965816 -6.9628448489496648222 -0.53510577451209895283 -4.5051345622892888798 -3.282470633624727796 0.28903830737263708217 3.0317149157124210213 3.4822967602433223533 -5.0931028715385613381 0.92686562964967789124 3.4412276904315750592 0.4846231833481826623 -2.1964252346263091198 -1.430779223257123034 3.2083290199648151209 -0.13140113603382858054 -0.11602904661842729228 0.15896188098571734093 3.3100684959412576269 0.28952479138763348443 -2.5694499644023376383 6.3610919958575475874 -0.31064207176641150943 0.65219527646734687387 -0.28380042178638181793 0.36726693234396490251 -1.0040769923916472717 -0.19406167756465872443 -5.372152363762823235 0.85559681041385826639 0.53015149128934013767 1.1595040768354090144 6.4593790302867652997 3.3801940603581943634 -0.29639080131516959415 -6.4457916954607590299 1.2550943875465137012 3.9922611967188545989 4.9089279092533093518 -2.1398965570596191199 -0.2404139733866366424 1.5903777209713381158 2.7105754871820897378 2.0948968002797268007 0.5193123600368115822 11.275995510090222496 -2.165840891672077273 5.6246429971460916164];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.533787165877804;0.788527964418997;2.25106301047751];
y1_step1.xoffset = [-1.82517310309568;0.576613863304083;-0.470200245018933];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
