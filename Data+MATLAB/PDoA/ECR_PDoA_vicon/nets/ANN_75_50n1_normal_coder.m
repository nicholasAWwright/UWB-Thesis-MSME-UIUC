function [y1] = ANN_75_50n1_normal_coder(x1)
%ANN_75_50N1_NORMAL_CODER neural network simulation function.
%
% Auto-generated by MATLAB, 17-May-2020 22:53:31.
% 
% [y1] = ANN_75_50n1_normal_coder(x1) takes these arguments:
%   x = 4xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-174718;627;-105928;629];
x1_step1.gain = [6.08596424496006e-06;0.000655522779416585;8.43401437999452e-06;0.000655737704918033];
x1_step1.ymin = -1;

% Layer 1
b1 = [10.674497386451756498;-2.258599740082237961;-2.7188188796012289217;-0.59832119043252163237;7.7278956576498369913;-10.02096600460219733;1.6644478259901931416;2.9145199639641594658;16.705434906939828466;2.3631641401028335991;8.141561017440469783;-2.1172073657177072903;2.0159907571148276695;1.3118435343393193282;-14.20712594877890389;4.6058522545576296991;-1.7571960399402222208;-0.07217520125865063696;0.1971396961673222703;0.19133459470760103005;0.31023360612233424893;-0.098494546766304924557;1.2350200019373880345;5.7698641049898373723;0.79367602535223436;0.31502259721411268734;1.6656478008315738215;19.568459369296157035;1.7770245692224240219;14.493105665324112152;0.78960541127501759906;5.0207369558250016794;0.87734066303701974121;-3.7284706874035178359;-19.516004903086372479;1.619052157074011733;0.84571573279539313805;2.250185030492499294;7.0506318071343292431;-9.8381856852531033297;-7.3158621522915314728;-3.5901325654267117748;-11.064791119339119518;4.9148229657414246319;-6.1653567373449256195;10.721788981613105562;8.9978614384870390097;-5.8178234012439116185;4.0685236602663685801;-7.7321626988249976264];
IW1_1 = [-7.4594191203259594403 2.5893078582814976762 1.0034280871907310662 3.6229285962942396893;3.7490710399319109314 0.18961745322599835029 -0.11558784187029241819 0.31996329885838065143;0.010630198333754925163 -2.3609691298842014895 -5.587942282304577013 3.056280693693871342;1.2383340452562243694 -0.17209859912340444432 -0.22249970857157597148 -0.14156793903863562623;1.2530024702239603851 8.409514804380448183 9.4946158566057086148 6.0960243467909069892;-0.88036769040027595956 -9.6413276896306925323 -3.5958903182325068215 -13.251910939508380949;0.068028394489122512301 1.1371313325346026346 3.4249313476276710411 -1.637042184115314214;0.059671356669346753421 -1.5848300759300553153 0.83234969733737140807 -2.2305062809009901237;-22.822990852611908963 -2.2755983767362790715 -0.86326920708376553293 -10.436612531761264577;-1.7553905153460127586 1.7619887927014807882 -2.2796846889368973521 5.732056276610461687;1.6907688662283941738 9.8022655607352966456 10.170457535132223725 5.6897973203462983705;1.5729342025801176241 0.86799871553940100011 -0.87168578698476473221 0.75178981045615345113;3.7178389765766346464 -5.4550062355025383809 1.9275815735390589012 -0.32405333659724649964;-1.7318618096942079987 6.7226872000020199138 1.8233479048658658428 0.32316319389562564446;10.986198349720725176 10.938966901628971229 16.853325504941739865 1.6844063289941624273;-5.633677238947423227 5.7706032139017935378 1.1459260464486802356 7.0569532973872668435;0.033901955490706098262 10.102824990788814574 3.7336959288585043204 4.8761572256104912526;1.2380623261994196938 -0.22573384570245191849 1.9465564268112416357 -3.9554234583070524423;-0.78456286931006025132 0.71613958144256684157 -1.656320935227251212 3.3731419755783131897;1.5660085793194729042 -0.064592669271449340562 -0.12279667563616977755 0.040752599465567695969;-0.1435813968625421766 0.11190381155939357893 -5.8568085927834925286 -0.086824139241679892942;0.86626064862319429594 0.12062068696708889981 -1.4812171516343637379 1.6020464359816466438;-1.5740496997695430093 6.8702611557207111659 1.760989882099924575 0.47995757893072638067;-40.782374957671741811 2.5161355491423189612 -2.123066419818014694 -4.3681697506958832022;0.30503427222855056256 4.5593743453769750573 0.85535211958837642499 1.0468658780765451866;-0.85001100191836398423 1.6203849372846177435 -1.7328932627592468219 3.7726397689303174943;2.4228789254036060541 1.8671861739737638519 2.0584985092502754433 -0.41429904178391629976;30.407993041718789584 3.779000353040266269 -0.96130981251040847901 24.506933694114994893;-0.70792911248433976201 1.2879735040866893137 10.184474599389368166 -22.612204512356605335;22.60598678230380898 3.2945026687422278577 -0.064823186867348767115 17.156414784598741363;0.19497825704375726374 3.3708316983746389184 0.46147205151483666752 1.5417316127896405487;8.5170099699492070044 -0.77337647765883188455 -0.77482625188458209564 0.59611457407255030727;-0.30468079827976773943 0.26295852412973980128 1.2530518599104962796 -0.27656226175128589828;-4.0594966297317434112 -5.8857478619197163283 6.0354304320166178854 -9.7882899425893405976;-19.137954006151989716 -12.99487674221754574 11.342253552067521838 23.853534033117540503;2.0038635114931531156 1.6094205936438530369 2.1478408293768724846 -0.53043956688558824286;0.18824042540497740172 4.4382058646538098401 0.75998709281335552479 1.3126130428481181944;1.8631029371801939298 3.3682724728899327005 -3.3041722337125127851 5.3978780421188412575;8.7209475981399702249 -0.49753950759933474046 0.16821302539680538235 -5.2858945915750386035;-13.846242937650641736 19.134035055767785849 11.132866056693798029 -24.538889216788501102;-11.83299825873895017 8.3356351978835725447 4.808602056682276249 -6.5197562312390857642;-0.96891338830940987314 -1.6304636901412548067 -0.31439996181574464407 -4.3231790794343201156;-9.7830200582958415367 2.2328739890656703615 3.6742113833028242631 -7.3421866105008275483;6.2015548978266084035 -0.20513821511128471631 0.48677124011465988662 -3.5906591445965663212;-4.30561839403791069 -2.4158215233871005445 -2.6960551545963977738 -0.42596865512094728157;1.03806714342882489 10.304554633580243816 3.9112220498817196201 14.181007120518584586;10.631849656345044863 -1.859917026321594502 -0.20486281277193227335 -5.9415463490906752497;-3.4788653834739373671 -2.3022398157622321335 -1.8445741434206950338 -1.177508504042707127;0.74612587733637614207 1.4311937280171744824 -1.9765395462603614352 3.4195588275227022379;-0.078573133409185771936 4.845402952809373609 2.6341744820388859338 4.470452611956301503];

% Layer 2
b2 = [0.23591751803779123509;0.16574479982374717979;-0.61968463514712357476];
LW2_1 = [-0.12253779167619184565 -0.55609526443022649911 -0.054403850292931855981 1.2864520362987379443 0.0016767995048862401053 -0.15842231204084858409 -0.0023608369080028073286 -0.086353365473148008258 0.086227200351001537237 0.044228444918637636885 0.0009232289090563842093 0.097824444935774135246 -0.039174908550097913007 0.0088893991108282728597 0.019191836485087078457 0.021086523857973604734 -0.012358517830931278064 -0.14589747953445192374 -0.14577074472452042353 -1.1846512288598922691 -0.04262654023614741855 0.020051872736475857828 0.044695292060542846091 0.10057455018142948122 0.80632120541956697757 0.045888831309173573614 0.28189311111002962607 -0.061572060722260346655 -0.021105761528587455716 0.078875877555974444055 -0.16653677250295376155 -0.008373774746842557043 0.090655173326884802565 0.020608345362752036878 0.011921212706627853928 -0.29826801396629615271 -0.74799138566000133999 0.055050185064633674892 -0.71562282584673042596 -0.0079858348014952684063 0.058691780323065143032 0.0052036748319561707682 -0.076144213300522844978 0.30386573365783786649 -0.00097468703634699541474 -0.14615010636926631382 0.37559019768576440423 -0.11677052278818422781 0.040712132844388279618 -0.0342342510909453418;-0.29523357706857378258 -0.65670667755418510314 0.29897688380707815314 0.44031485895339184111 -0.075913704471719661848 0.74843895918746294882 0.51730645241428074854 -0.4393665053680302357 0.10229141373805421267 -0.27238196675358955501 0.044677514865332973448 0.63732051798152733468 0.059242287758388502417 -1.5080801794380176428 0.040828257694736601324 0.18508109718389337273 -0.089644069079539673295 0.76915067196960695828 2.0046296856579943757 -0.17459569337076702444 -0.011358999463698418037 0.28176021980931992283 1.9076128383800199373 0.054465545715353634593 4.6082904740098156182 -0.82339772595786053788 -0.0068838203684261243739 -0.26087430224210927943 0.082504421239739306193 0.36717941604159570756 3.1348871672273395106 0.18406829294331386593 0.3617281736281451332 -0.073819095772184747939 0.048471056913091441209 -0.17004926558225980093 -7.6446226729282962253 -0.14506842418832435748 0.44583404093781642263 0.04394441550707132299 -0.019550839313924331386 -0.1633778112958041151 0.1061402213528488403 -0.014967247739124688033 0.5313836388119748122 0.65062100314861848194 -0.3136535144089907523 -0.53363094346501949161 0.055945799908214619012 -0.11023925319483512952;-0.14193815775650056588 -0.65019699985407397591 -2.6346927844579930422 1.6474964108838310306 -2.1474979416101334095 5.1286875872876356297 -7.2728047758393792321 2.1772579882286953179 -0.095739662022773855399 1.7022953226094477142 2.120310501411117432 2.1133875227764105098 -0.41030269988575773787 3.5936466462917215914 -0.15633805037451783959 -0.40128620480355570166 -0.39314416371100135983 -5.118746954398268656 -13.926831399031005532 -0.0893132228789965954 0.82266036960415289681 1.6199474692169704149 -3.7069150609485750358 0.12968110656013895343 6.0976028626266707278 7.4034907562612835008 -5.0148932337571618945 -3.4350355176580547045 -0.28907577399177475375 3.1337196105658566836 -5.1555225741723456068 0.3474631171503528293 8.8005008994680355983 1.1927119117101419032 -0.28480244355987954785 6.9495696427509070503 -2.769398039468190742 2.182831537047891679 6.7046458532188806245 -0.24967173478100296302 0.27918045749814668355 1.1449821275987772662 -0.48403342917833291903 -4.3707230152718974381 -9.487810611302599284 4.9026445202294821613 -3.2497356387956761736 12.76351182188790645 1.7151648063319160364 0.49890858957997147316];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.533787165877804;0.788527964418997;2.25106301047751];
y1_step1.xoffset = [-1.82517310309568;0.576613863304083;-0.470200245018933];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
