function [Y,Xf,Af] = ANN_60_50n1_normal_compiler(X,~,~)
%ANN_60_50N1_NORMAL_COMPILER neural network simulation function.
%
% Auto-generated by MATLAB, 13-May-2020 22:37:03.
% 
% [Y] = ANN_60_50n1_normal_compiler(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-166881;627;-105928;629];
x1_step1.gain = [6.4553820133691e-06;0.000655522779416585;8.43401437999452e-06;0.000655737704918033];
x1_step1.ymin = -1;

% Layer 1
b1 = [-7.7082888663259527817;26.543799872321670819;5.8104455100763106046;16.442976701550875873;7.0347717808154950347;-4.5475377762678936833;-1.1369883788020456183;7.0631222501154926618;2.9353501429529571531;25.79613209547952124;2.9485031049303982442;-0.82130094000199815873;-1.4895411932743896077;-3.8524807438411636795;-2.2304549816096450598;-15.789775737039093428;-9.7520687573089173128;-3.810468768044354082;0.65550236707992759477;-4.1727734703220002999;1.1032555197920581591;-0.23128596965087222515;-1.3744648845230003076;-0.27309219974916548734;7.7460288347995547298;-0.049087515080244711885;-0.37284366825764370112;1.2532537779359664842;-0.62387307384140466837;8.7971064943396886093;12.590743628642268703;-3.8629722716320471498;5.4179053524300497813;-10.434638639703578633;5.8910159736111902262;0.33020666294560446774;16.527006895865110181;-5.2628465979613920922;-10.992264789238536338;-3.0917883051220669266;10.079963765203888926;13.319013344806844401;4.4366242159682016677;-11.452913738824346268;13.362935628262363252;-4.9867367909020012817;-9.2797898559749256719;-16.76551908199742158;-7.4967159615550009732;9.4669772865269852247];
IW1_1 = [-0.44782688829663275243 -6.7037040615559542189 0.95345034658261451632 -5.4464924287977414252;-4.8055354021710732226 -13.298649919570811662 9.8317585365633508587 -14.024214113055293751;-1.8020108553583291666 2.0461085850664089136 8.4486020623117106254 0.83812450690315265511;-13.038607482164573881 2.3030300691996643536 27.829358319735970184 15.129459080049402431;-4.3136523913126376684 -2.2273438116207704418 0.37604277567291521933 -3.2259325721448748325;0.59362262342408878002 4.1776564046888502446 -0.020282700352029704727 3.1407800724806245185;1.359296755408720081 0.27793219919232059478 -1.0938314694131534566 -0.92719368342941443917;-2.2795204515721505523 2.8743562759790446393 10.129088976586487547 0.6962297099383947252;-3.7718114672829803347 -0.46756988057881615495 -2.0548669688080449802 -2.4449882223930901048;-32.987223378365207793 0.8487696600874103936 -1.0847224517691604895 -13.113114216960518377;-4.6848710169088176869 -0.96555770537885188265 3.7942685422972610709 0.40105433641731635941;0.68196503648129525033 -0.31559082601163407356 -0.59844607698633656145 -0.7224198884961530176;0.63417335527518547966 1.6843561254462695587 -0.13009320113230299354 1.0386250640352798769;5.6236762252366574444 -1.8115160274664945383 0.42872145513330561784 0.4941410751202319207;2.9380075420108040518 0.69284014628157508664 1.6563817031360561494 0.31571980215287143157;28.368600109477799975 8.099267352563154887 1.3795500722841809171 1.9375410376082946584;13.699083245218272253 10.707142509795094298 2.7312768363318276066 12.842920102741365085;0.045796842367251192063 9.1397274834825878997 -0.33577697366329989359 3.7175423094153412507;0.28741899471174198188 0.012594174359681284403 -1.9524577272237084724 -0.23058138501889155481;-1.6411592508353640696 4.2191230287098591134 -0.87886072672678228201 -0.65752958872841482663;-1.7053267564477385676 1.9577110815298093272 -1.8968265727248283525 -0.31865263141178623574;2.7414058904998821475 -8.5917243326190337882 -8.6098665355750139128 -10.481118171001584827;-3.1816833199329757065 1.738083456151871431 0.38527806161916799965 0.53554872073265036292;-0.96981955116293905306 0.56432628481757118877 -2.1338198342307364008 -0.44148196380151477625;-47.260084426983596018 -0.56638072894234803289 -2.7927872914850002672 -1.8497395344978515563;-2.8875027070382364158 -2.3907032855104413116 2.264559338444203096 1.3422026723997813047;-1.4649489331980181106 -0.11748143562241367133 0.32878902367222900827 0.12368254818000209982;1.2600821707256735227 0.64864635720008601005 -0.30191373805174653855 0.59975319294745077503;-0.18170536002652384888 0.0067139806702748109496 2.7221581124943585728 0.68441582121351374202;13.073293458180177851 -1.4871053569491901047 -15.220723954490072316 7.307588457595599607;21.217787839620090296 14.13811796359463635 -19.130640300826126321 14.898262435150975591;-5.3962177773874486775 0.73376923308289010439 0.50821840447538868535 0.72350599509347046645;0.16351722284397104956 -14.72891653846271609 0.30868246384628689194 -7.1320294110694479883;-12.015866188205466258 -23.646928779992649083 -19.739691939045137303 28.053002338148264272;2.3350849520257366265 -14.218271369902385715 -0.76106367587877776781 -8.9148359525796045943;1.9211105531398162682 1.4125347020825254063 0.049524764191369141653 2.1165680441310885662;23.458565226824383387 0.86655380845808260837 -3.1997613213235553964 22.120899831620949527;-0.091816845652262488175 12.01212632575696837 -0.4223643713661449639 4.9118072091500879495;-14.261955617249403971 -0.90660272855726209418 18.654291583504821972 0.7503943077347204893;0.85812983085405392103 -1.6655847634294853599 0.69180987864972320889 -2.3058624696142713262;12.356170587299303065 -4.1083666346501956923 -2.5983711185410429678 4.0658337413416827388;13.104967980752576295 7.0889693805497300261 -7.4676337829744214858 4.7851780502525063099;6.2913428517353198188 -0.48580846302004621062 -0.48907433951288026286 -0.89620845764613499274;-5.5958424798597699024 6.4393226711847857402 -13.655443486280049115 4.4942297571966438596;14.370312939510395012 -13.092675944867147919 -2.6685087370344997559 1.9580258204433280689;-6.5293022522656736228 2.0051118289416676177 1.1590653949130034217 1.1840653310984228241;-9.3650843287408651605 -0.62732215220742915118 6.0068008199400120262 4.3787231981184042695;-23.616536478866823501 -0.98081247599541820925 3.2673528873240726966 -22.35299293719815239;0.64325160875511544489 -4.7988780870838683157 -12.112256608526683621 8.1344234720453201248;9.9586295020716519844 0.96574794365323313183 -6.7116199109232956843 -4.2297710571134841118];

% Layer 2
b2 = [-0.14411173512952843434;-0.63167170607751532696;0.20415982632091289606];
LW2_1 = [0.051801029255107801375 -0.0031506434080156762133 -0.072381110218794869615 0.0089893475034897325077 0.024961023242765958963 -0.050089859937305220017 -0.049098383275412368909 0.09112485781777414362 0.034944142635806134389 0.1511208534079560295 -0.026720711292729206615 0.29364566174878259375 0.17322187912728786996 -0.047711870327451055829 0.11263569521215410774 -0.12442003292839518003 -0.017797724279336228637 -0.11887577605205845721 -0.28023167958359462837 -0.047579649122250482207 -0.0079315308348213795636 -0.0063465520141846977833 0.081450435435893558944 0.031183158093374248321 0.096108129092637994972 -0.0095534688583831933739 0.73071020660165919569 0.48499444917424305856 -0.18700218479262983862 -0.0030154308242559698348 0.008365395681273157108 -0.1769479366810704779 -0.019634517585419983959 0.0054363069702310978445 0.0020986141795960263669 -0.033904093145932602538 -0.046271649131745785921 0.060941623006558719167 0.025094531111466842482 -0.056434210238714650754 0.082684852441775841259 0.033971566147761173005 -0.17373090108514002705 -0.025807626664054110488 0.015565521496066351756 0.17228298200550093422 0.043024756884204463925 0.0030682009887505910448 -0.011828172480424109861 0.079382019410412257843;-0.18734698459844803531 -0.095561136412123132144 -0.37527924675882806671 0.0028520758618710831053 -0.017400599079939065017 0.083251120450631502234 -0.063428549666284278485 0.3174595822237842313 0.017127218810100791613 0.17906066287514466051 -0.024651350742049500664 -0.25790384655738657349 0.41856238518424676576 -0.14166703430944022069 0.093507949205565210615 -0.082401436043413225918 0.03013397070562844407 -0.50242741010547475877 0.39226756191453632239 -0.16062192712054645938 0.058881992496321804154 0.014725911015979201851 -0.16705573493097361504 -0.11327164740137818377 0.056329907817750483889 -0.022070252441465119941 0.5943812944096635853 0.70440730676567253621 0.10326063498983874267 -0.0085326167040739690772 -0.019283541552524593315 1.0659510329312236188 -0.24508099170493077845 -0.027357730524200898209 0.094724016232483290723 0.25548008243771452852 0.41871189560467819701 0.32356766300839012729 -0.013487716786627973117 0.29377811991424085392 -0.17557534095250740269 -0.051336019016597525533 0.87052150989254062363 0.018512090336990232736 -0.012302883031694288388 -0.3800500290294165362 -0.046979128197219839624 0.34466276411469920493 0.0097528105426827604862 -0.05670434123837229945;0.29832188313233526378 0.73297505510342586543 2.9682676068445004169 -0.14992810030993136694 -1.430046567598878049 -1.7782136789288132128 -3.6820343203443308688 -2.6394188611522588772 -0.48261743425203645907 -0.023558601655673076791 -0.41119890693997740438 7.6951248087453771873 5.4553553569748611807 -0.24966760062804660425 -0.71517754979511150015 -0.059764256597027332063 0.16571532389292065179 -8.8757202656174207789 -7.8925213989951119586 -2.2606043796244312816 -0.64382772388745312941 0.24503853263227348691 -1.7247217469835178782 1.4328552935625187281 0.08506023829195845376 -0.781249177100121317 5.7749266412341837551 5.7356655663878868268 -4.7719724283040001467 0.18717150610457453097 -0.1546378397353158074 14.146704549485853875 -2.2882991268528316553 0.11423267248824081621 0.61709307640747224077 1.1344747653442099899 -6.9875517303852126005 5.8447380506799175848 -0.22486235397381137968 -0.83985589872831223346 -0.12209152373671502967 -0.2314669120057604168 8.6762525649493156266 -0.074037251675794835126 -0.5457603391914762625 -4.6953889732701634685 -5.4834000387995462944 -6.786474299977123259 -0.22559556175429285041 -4.3533840617470591638];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.533787165877804;0.788527964418997;2.25106301047751];
y1_step1.xoffset = [-1.82517310309568;0.576613863304083;-0.470200245018933];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
